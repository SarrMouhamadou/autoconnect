# Generated by Django 5.2.8 on 2025-11-17 12:53

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Equipement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nom', models.CharField(max_length=100, unique=True, verbose_name="Nom de l'√©quipement")),
                ('icone', models.CharField(blank=True, help_text='Ex: üéµ ou fa-music', max_length=50, verbose_name='Ic√¥ne (classe CSS ou emoji)')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('est_populaire', models.BooleanField(default=False, help_text='Afficher en priorit√© dans les filtres', verbose_name='√âquipement populaire')),
            ],
            options={
                'verbose_name': '√âquipement',
                'verbose_name_plural': '√âquipements',
                'ordering': ['-est_populaire', 'nom'],
            },
        ),
        migrations.CreateModel(
            name='Vehicule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('marque', models.CharField(help_text='Ex: Toyota, Mercedes, Peugeot', max_length=100, verbose_name='Marque')),
                ('modele', models.CharField(help_text='Ex: Corolla, Classe C, 308', max_length=100, verbose_name='Mod√®le')),
                ('annee', models.IntegerField(help_text='Ann√©e de fabrication', validators=[django.core.validators.MinValueValidator(1990), django.core.validators.MaxValueValidator(2030)], verbose_name='Ann√©e')),
                ('type_vehicule', models.CharField(choices=[('BERLINE', 'Berline'), ('SUV', 'SUV'), ('4X4', '4x4'), ('CITADINE', 'Citadine'), ('BREAK', 'Break'), ('COUPE', 'Coup√©'), ('MONOSPACE', 'Monospace'), ('UTILITAIRE', 'Utilitaire'), ('PICK_UP', 'Pick-up'), ('SPORTIVE', 'Sportive')], max_length=50, verbose_name='Type de v√©hicule')),
                ('type_carburant', models.CharField(choices=[('ESSENCE', 'Essence'), ('DIESEL', 'Diesel'), ('HYBRIDE', 'Hybride'), ('ELECTRIQUE', '√âlectrique'), ('GAZ', 'Gaz (GPL/GNV)')], max_length=20, verbose_name='Type de carburant')),
                ('transmission', models.CharField(choices=[('MANUELLE', 'Manuelle'), ('AUTOMATIQUE', 'Automatique'), ('SEMI_AUTO', 'Semi-automatique')], max_length=20, verbose_name='Type de transmission')),
                ('nombre_places', models.IntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(20)], verbose_name='Nombre de places')),
                ('nombre_portes', models.IntegerField(default=4, validators=[django.core.validators.MinValueValidator(2), django.core.validators.MaxValueValidator(6)], verbose_name='Nombre de portes')),
                ('climatisation', models.BooleanField(default=True, verbose_name='Climatisation')),
                ('kilometrage', models.IntegerField(help_text='En kilom√®tres', validators=[django.core.validators.MinValueValidator(0)], verbose_name='Kilom√©trage')),
                ('couleur', models.CharField(max_length=50, verbose_name='Couleur')),
                ('immatriculation', models.CharField(max_length=20, unique=True, verbose_name="Num√©ro d'immatriculation")),
                ('prix_jour', models.DecimalField(decimal_places=2, help_text='Tarif de location journalier', max_digits=10, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Prix par jour (FCFA)')),
                ('caution', models.DecimalField(decimal_places=2, default=0, max_digits=10, validators=[django.core.validators.MinValueValidator(0)], verbose_name='Montant de la caution (FCFA)')),
                ('description', models.TextField(blank=True, verbose_name='Description d√©taill√©e')),
                ('equipements', models.JSONField(blank=True, default=list, help_text='Liste des √©quipements du v√©hicule (GPS, Bluetooth, etc.)', verbose_name='√âquipements')),
                ('statut', models.CharField(choices=[('DISPONIBLE', 'Disponible'), ('LOUE', 'Lou√©'), ('MAINTENANCE', 'En maintenance'), ('INDISPONIBLE', 'Indisponible')], default='DISPONIBLE', max_length=20, verbose_name='Statut')),
                ('est_disponible', models.BooleanField(default=True, verbose_name='Disponible √† la location')),
                ('image_principale', models.ImageField(help_text='Photo principale du v√©hicule', upload_to='vehicules/', verbose_name='Image principale')),
                ('nombre_locations', models.IntegerField(default=0, help_text='Nombre total de fois o√π le v√©hicule a √©t√© lou√©', verbose_name='Nombre de locations')),
                ('note_moyenne', models.DecimalField(decimal_places=2, default=0, max_digits=3, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(5)], verbose_name='Note moyenne')),
                ('nombre_avis', models.IntegerField(default=0, verbose_name="Nombre d'avis")),
                ('date_ajout', models.DateTimeField(auto_now_add=True, verbose_name="Date d'ajout")),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Derni√®re modification')),
                ('derniere_maintenance', models.DateField(blank=True, null=True, verbose_name='Date de derni√®re maintenance')),
                ('prochaine_maintenance', models.DateField(blank=True, null=True, verbose_name='Date de prochaine maintenance')),
                ('concessionnaire', models.ForeignKey(limit_choices_to={'type_utilisateur': 'CONCESSIONNAIRE'}, on_delete=django.db.models.deletion.CASCADE, related_name='vehicules', to=settings.AUTH_USER_MODEL, verbose_name='Concessionnaire propri√©taire')),
            ],
            options={
                'verbose_name': 'V√©hicule',
                'verbose_name_plural': 'V√©hicules',
                'ordering': ['-date_ajout'],
            },
        ),
        migrations.CreateModel(
            name='ImageVehicule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(upload_to='vehicules/galerie/', verbose_name='Image')),
                ('description', models.CharField(blank=True, max_length=200, verbose_name="Description de l'image")),
                ('ordre', models.IntegerField(default=0, verbose_name="Ordre d'affichage")),
                ('date_ajout', models.DateTimeField(auto_now_add=True, verbose_name="Date d'ajout")),
                ('vehicule', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='images', to='vehicules.vehicule', verbose_name='V√©hicule')),
            ],
            options={
                'verbose_name': 'Image de v√©hicule',
                'verbose_name_plural': 'Images de v√©hicules',
                'ordering': ['ordre', '-date_ajout'],
            },
        ),
        migrations.AddIndex(
            model_name='vehicule',
            index=models.Index(fields=['marque', 'modele'], name='vehicules_v_marque_f101fd_idx'),
        ),
        migrations.AddIndex(
            model_name='vehicule',
            index=models.Index(fields=['statut', 'est_disponible'], name='vehicules_v_statut_0f787b_idx'),
        ),
        migrations.AddIndex(
            model_name='vehicule',
            index=models.Index(fields=['prix_jour'], name='vehicules_v_prix_jo_ded1e5_idx'),
        ),
    ]
